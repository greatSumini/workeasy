---
description:
globs:
alwaysApply: true
---
# workeasy 정보 아키텍처(IA)

## 1. 사이트맵 (Site Map)

workeasy 서비스는 인증 여부와 사용자 역할(관리자, 직원)에 따라 접근 가능한 페이지가 구분됩니다. 전체 구조는 다음과 같습니다.

- **Public (인증 전)**
  - `/landing` - 서비스 소개 및 로그인/회원가입 유도 페이지
  - `/login` - 이메일 또는 카카오톡 로그인
  - `/signup` - 회원가입
  - `/password-reset` - 비밀번호 재설정

- **Authenticated (인증 후 - 공통)**
  - `/` 또는 `/dashboard` - **대시보드 (홈)**
    - 오늘의 근무 현황, 최근 공지, 수신된 요청 요약
  - `/schedule` - **근무 캘린더**
    - 개인 및 전체 팀 근무 일정 (일/주/월별 보기)
  - `/requests` - **교환 요청**
    - 내가 보낸 요청 목록
    - 내가 받은 요청 목록
    - `/requests/:id` - 요청 상세 보기
  - `/chat` - **채팅**
    - `/chat/:channelId` - 매장별 채팅방
  - `/notifications` - **알림**
    - 모든 활동에 대한 알림 피드
  - `/settings` - **설정**
    - `/settings/profile` - 내 프로필 수정
    - `/settings/notifications` - 알림 설정
    - `/settings/app` - PWA 설치 가이드, 앱 정보

- **Authenticated (인증 후 - 관리자 전용)**
  - `/admin/dashboard` - **관리자 대시보드**
    - 전체 근무 시간, 예상 인건비, 공석 경고 등 통계
  - `/admin/staff` - **직원 관리**
    - 직원 목록, 초대, 역할 변경
  - `/admin/settings` - **매장 설정**
    - 매장 정보, 근무 규정 설정

## 2. 사용자 흐름 (User Flow)

**주요 과업 1: 알바생 '지수'의 근무 교환 요청 및 처리**

1.  **시작**: 알바생 '지수'가 PWA를 실행합니다.
2.  **내비게이션**: 하단 탭 바 또는 사이드바에서 '근무 캘린더'로 이동합니다.
3.  **상호작용**: 교환을 원하는 날짜의 '근무 카드'를 탭합니다.
4.  **액션**: 상세 정보 팝업에서 '교환 요청' 버튼을 클릭합니다.
5.  **폼 작성**:
    - 교환을 희망하는 동료('현우')를 목록에서 선택합니다.
    - 간단한 요청 사유를 입력합니다.
    - '요청 보내기' 버튼을 클릭합니다.
6.  **시스템**:
    - 관리자 '민지'와 동료 '현우'에게 푸시 알림이 전송됩니다.
    - 요청 상태가 '대기 중'으로 변경되어 '교환 요청' 페이지에 표시됩니다.
7.  **관리자 승인**: 관리자 '민지'가 푸시 알림을 탭하여 앱 내 요청 상세 페이지로 바로 이동합니다.
8.  **결정**: '승인' 버튼을 1탭하여 요청을 승인합니다.
9.  **완료**:
    - 시스템이 '지수'와 '현우'의 캘린더를 실시간으로 업데이트합니다.
    - 관련된 모든 사용자(지수, 현우, 민지)에게 '승인 완료' 푸시 알림이 전송됩니다.
    - 교환 내역이 로그에 기록됩니다.

**주요 과업 2: 관리자 '민지'의 주간 스케줄 자동 생성 및 배포**

1.  **시작**: 관리자 '민지'가 PWA를 실행하고 '근무 캘린더'로 이동합니다.
2.  **뷰 변경**: 캘린더 보기 옵션을 '주(Week)' 단위로 변경합니다.
3.  **자동 생성**:
    - '스케줄 자동 생성' 버튼을 클릭합니다.
    - 시스템이 사전에 입력된 직원별 근무 가능 시간과 매장 규정을 기반으로 최적의 스케줄 초안을 생성하여 화면에 표시합니다.
4.  **수동 조정**:
    - 특정 근무 슬롯을 드래그 앤 드롭하여 다른 직원에게 할당하거나 시간을 미세 조정합니다.
    - 비어있는 슬롯을 클릭하여 수동으로 근무를 추가합니다.
5.  **저장 및 배포**:
    - '저장 및 공지' 버튼을 클릭합니다.
    - 시스템이 모든 직원에게 '새로운 주간 스케줄이 등록되었습니다'라는 푸시 알림과 함께 채팅방에 공지를 전송합니다.
6.  **완료**:
    - 모든 직원의 캘린더에 새로운 스케줄이 즉시 반영됩니다.
    - 관리자 대시보드의 '주간 예상 인건비' 위젯이 업데이트됩니다.

## 3. 네비게이션 구조 (Navigation Structure)

workeasy는 모바일-퍼스트 PWA이므로, 모바일과 데스크톱 환경에 최적화된 네비게이션을 제공합니다.

-   **모바일 (Mobile)**
    -   **탑 바 (Top Bar)**: 현재 페이지의 제목과 우측에 알림 아이콘, 프로필 아이콘을 배치합니다.
    -   **메인 네비게이션 (Main Navigation - Drawer Menu)**:
        -   화면 좌측 상단의 햄버거 아이콘(☰)을 통해 접근합니다.
        -   주요 메뉴(대시보드, 근무 캘린더, 교환 요청, 채팅, 설정)로 빠르게 이동할 수 있는 링크를 제공합니다.
        -   관리자일 경우, '관리자 메뉴' 섹션이 추가로 노출됩니다.

-   **데스크톱 (Desktop)**
    -   **좌측 사이드바 (Left Sidebar - GNB)**:
        -   화면 좌측에 고정된 슬림한 사이드바로, 아이콘 기반의 네비게이션을 제공합니다.
        -   포함 메뉴: 대시보드, 근무 캘린더, 교환 요청, 채팅, 설정, 관리자 메뉴(관리자 전용).
        -   마우스 호버 시 메뉴명이 텍스트로 확장되어 표시됩니다.
    -   **탑 바 (Top Bar)**:
        -   사용자 프로필 드롭다운(내 정보, 로그아웃), 알림 센터 아이콘, 매장 선택 드롭다운(여러 매장 관리 시)을 포함합니다.

## 4. 페이지 계층 구조 (Page Hierarchy)

페이지의 깊이(Depth)는 들여쓰기로 표현합니다.

-   `/` (Depth 1) - 인증 상태에 따라 `/dashboard` 또는 `/login`으로 리디렉션
-   `/login` (Depth 1)
-   `/signup` (Depth 1)
-   `/password-reset` (Depth 1)
-   `/dashboard` (Depth 1)
-   `/schedule` (Depth 1)
-   `/requests` (Depth 1)
    -   `/requests/:id` (Depth 2)
-   `/chat` (Depth 1)
    -   `/chat/:channelId` (Depth 2)
-   `/notifications` (Depth 1)
-   `/settings` (Depth 1)
    -   `/settings/profile` (Depth 2)
    -   `/settings/notifications` (Depth 2)
    -   `/settings/app` (Depth 2)
-   `/admin` (Depth 1) - 관리자 전용 네임스페이스
    -   `/admin/dashboard` (Depth 2)
    -   `/admin/staff` (Depth 2)
    -   `/admin/settings` (Depth 2)

## 5. 콘텐츠 구성 (Content Organization)

주요 페이지에 포함될 핵심 콘텐츠 요소를 정의합니다.

| 페이지 | 주요 콘텐츠 요소 |
| :--- | :--- |
| **대시보드 (`/dashboard`)** | - **요약 위젯**: 오늘의 근무자, 처리 대기 중인 교환 요청, 최근 공지사항<br>- **빠른 액션 버튼**: '근무 추가', '공지 작성'<br>- **캘린더 미니뷰**: 금일 및 익일 스케줄 하이라이트 |
| **근무 캘린더 (`/schedule`)** | - **캘린더 뷰**: 일/주/월 단위 보기 전환 토글<br>- **필터**: 직원별, 포지션별 필터링 옵션<br>- **근무 카드(Shift Card)**: 시간, 담당자, 상태(확정, 대기) 표시<br>- **액션 버튼**: '스케줄 자동 생성'(관리자), '교환 요청'(직원) |
| **교환 요청 상세 (`/requests/:id`)** | - **요청 정보**: 요청자, 기존 근무 시간, 요청 사유<br>- **대체 근무 정보**: 제안된 대체 근무자 및 시간<br>- **타임라인**: 요청 생성 → 승인/거절까지의 로그<br>- **액션 버튼**: '승인', '거절' (관리자), '요청 취소'(요청자) |
| **채팅 (`/chat/:channelId`)** | - **메시지 목록**: 대화 내용, 보낸 사람, 시간, 파일/이미지 썸네일<br>- **고정된 공지**: 채팅방 상단에 고정된 중요 공지<br>- **입력창**: 텍스트 입력, 파일 첨부(이미지, PDF), @멘션 기능 |
| **관리자 대시보드 (`/admin/dashboard`)** | - **핵심 지표(KPI) 카드**: 주간/월간 총 근무 시간, 예상 인건비, 평균 교환 처리 시간<br>- **차트/그래프**: 요일별 인력 분포, 직원별 근무 시간 통계<br>- **경고 위젯**: 근무 공백(빈 슬롯) 발생 위험 알림 |

## 6. 인터랙션 패턴 (Interaction Patterns)

서비스 전반에 걸쳐 일관된 사용자 경험을 제공하기 위해 다음 인터랙션 패턴을 사용합니다.

-   **모달 (Modal)**: 중요한 결정(예: 근무 교환 승인/거절)이나 여러 단계의 정보 입력(예: 새 근무 생성)이 필요할 때 사용합니다. 배경을 어둡게 처리하여 사용자가 현재 과업에 집중하도록 돕습니다.
-   **푸시 알림 (Push Notification)**: 근무 교환 요청, 승인/거절, 새 공지, 채팅 멘션 등 즉각적인 확인이 필요한 모든 이벤트에 사용됩니다. 알림 클릭 시 관련 페이지로 직접 이동(Deep Linking)합니다.
-   **실시간 업데이트 (Real-time Update)**: Supabase Realtime을 활용하여 캘린더, 채팅, 대시보드 위젯 등의 데이터 변경 사항을 별도의 새로고침 없이 1초 이내에 화면에 반영합니다.
-   **토스트/스낵바 (Toast/Snackbar)**: '저장되었습니다', '요청이 전송되었습니다'와 같이 작업을 차단하지 않는 간단한 피드백을 화면 하단이나 상단에 잠시 표시합니다.
-   **스켈레톤 로딩 (Skeleton Loading)**: 데이터를 불러오는 동안 실제 콘텐츠의 레이아웃과 유사한 회색 스켈레톤 UI를 표시하여 사용자가 인지하는 로딩 시간을 단축시킵니다.
-   **1탭 액션 (One-Tap Action)**: 관리자의 빠른 의사결정을 위해 푸시 알림이나 리스트 항목에서 '승인'과 같은 주요 액션을 한 번의 탭으로 완료할 수 있도록 설계합니다.

## 7. URL 구조 (URL Structure)

사용자 친화적이고 검색 엔진 최적화(SEO)에 유리한 명확하고 일관된 URL 구조를 정의합니다.

-   **리소스 기반**: 각 URL은 특정 리소스(예: `schedules`, `requests`)를 나타냅니다.
-   **계층 구조 반영**: URL 경로는 페이지 계층 구조를 직관적으로 반영합니다.
-   **케밥 케이스(kebab-case)**: 여러 단어로 이루어진 경로는 하이픈(-)으로 연결합니다. (예: `/password-reset`)

| 구분 | URL 구조 예시 | 설명 |
| :--- | :--- | :--- |
| **전체 목록** | `/schedule`, `/requests` | 특정 리소스의 목록 페이지 |
| **상세 정보** | `/requests/:id` | 특정 리소스의 고유 ID를 사용한 상세 페이지 |
| **생성/수정** | `/requests/new`, `/requests/:id/edit` | 리소스 생성 및 수정 페이지 (주로 모달로 처리) |
| **사용자별** | `/settings/profile` | 사용자 개인에 종속된 리소스 페이지 |
| **관리자** | `/admin/dashboard`, `/admin/staff` | 관리자 전용 기능을 명확히 구분하는 `admin` 접두사 |

## 8. 컴포넌트 계층 구조 (Component Hierarchy)

재사용성을 극대화하고 일관된 디자인을 유지하기 위해 페이지를 컴포넌트 단위로 분해합니다. (shadcn/ui 기반)

-   **글로벌 컴포넌트 (Global Components)**
    -   `AppLayout`: 전체적인 페이지 레이아웃을 정의 (사이드바, 탑 바, 메인 콘텐츠 영역)
    -   `SidebarNav`: 데스크톱용 좌측 사이드바 네비게이션
    -   `MobileDrawer`: 모바일용 드로어 메뉴
    -   `TopBar`: 사용자 프로필, 알림 벨 등이 포함된 상단 바
    -   `NotificationCenter`: 알림 목록을 보여주는 드롭다운 또는 패널

-   **기능별 컴포넌트 (Feature-specific Components)**
    -   `CalendarView`: 일/주/월 보기 로직이 포함된 캘린더 컴포넌트
    -   `ShiftCard`: 캘린더 내 개별 근무 정보를 표시하는 카드
    -   `ShiftRequestModal`: 근무 교환 요청을 생성하는 모달
    -   `DashboardWidget`: 대시보드에 사용되는 각 통계 및 요약 카드
    -   `ChatWindow`: 메시지 목록과 입력창을 포함한 채팅 인터페이스
    -   `ChatMessage`: 채팅 메시지 버블 (내 메시지, 상대 메시지)

-   **원자적 컴포넌트 (Atomic Components - from shadcn/ui)**
    -   `Button`: 다양한 형태의 버튼 (Primary, Secondary, Destructive)
    -   `Input`: 텍스트 입력 필드
    -   `Avatar`: 사용자 프로필 이미지
    -   `Badge`: 상태(예: 대기중, 승인) 표시용 뱃지
    -   `Dialog`: 모달의 기본 구조
    -   `Toast`: 스낵바 알림
    -   `Card`: 콘텐츠를 감싸는 기본 카드 UI
    -   `Skeleton`: 스켈레톤 로딩 UI
